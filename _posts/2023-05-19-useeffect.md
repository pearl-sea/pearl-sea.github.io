---
layout: post
title: "useEffect"
categories: ["React"]
---

useEffect는 컴포넌트의 생명주기와 관련하여 사이드 이펙트를 수행하는 Hook이다.

#### Life cycle

컴포넌트의 생성, 업데이트, 삭제 등의 단계를 생명주기라고 한다.  
생명주기 메서드는 컴포넌트의 어떤 생명주기 단계에서 호출되어 특정한 동작을 수행하는 메서드이다.  
생명주기 메서드를 실행하고 그 결과로 사이드 이펙트를 처리하는 경우가 많다.

#### Side effect

1. 의도하지 않은 함수실행결과
2. 함수실행이 웹앱의 바깥 부분에 영향을 주는 것.

2번의 의미로 사용될때는 주로 이러한 작업들을 사이드 이펙트라고 한다.

- 로컬스토리지 사용
- 파일 생성, 수정, 삭제
- 데이터베이스 업데이트
- 외부API와 통신
- DOM 조작

### Mount

컴포넌트가 최초로 생성되어 화면에 표시되는것을 DOM에 마운트된다고 한다.

`useEffect`는 다음과 같은 시점에서 실행된다.

1. 컴포넌트가 처음 마운트될 때 (컴포넌트가 DOM에 삽입될 때).
2. 컴포넌트가 업데이트될 때 (컴포넌트의 상태나 속성이 변경될 때).
3. 컴포넌트가 언마운트될 때 (컴포넌트가 DOM에서 제거될 때).

### Syntax

`useEffect(<function>, <dependency>)`

첫번째 인자에는 실행시키고 싶은 콜백함수가 들어간다.  
함수만 적고 두번째 인자로 의존성 배열을 안 넣으면 무한루프가 되어버린다.

```jsx
useEffect(() => {
  console.log("출력");
});
```

두번째 인자는 의존성 배열이 들어간다.  
빈 배열을 넣어주면 최초 1번만 렌더링된다.

```jsx
useEffect(() => {
  console.log("출력");
}, []);
```

배열에 어떤 요소(주로 상태를 관리하는 변수)가 들어가면 최초 1번 렌더링이 되고
배열 안의 변수가 변경될때마다 다시 렌더링된다.

```jsx
useEffect(() => {
  console.log("출력");
}, [data]);
```

컴포넌트가 언마운트 될 때 정리 함수를 반환하여 필요한 정리 작업을 수행할 수 있다.

- `clean-up`  
  컴포넌트가 더이상 화면에 표시되지 않을때 불필요한 동작이나 메모리 누수를 방지하기 위한 작업이다.

```jsx
useEffect(() => {
  console.log("마운트 될때 하고 싶은 로직을 여기에 적습니다.");

  return () => {
    console.log("언마운트 될때 실행됩니다.");
  };
}, [data]);
```
